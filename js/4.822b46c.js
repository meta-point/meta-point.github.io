(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{934:function(s,e,t){"use strict";t.r(e),function(s){t.d(e,"default",(function(){return u}));t(189);var i=t(61),a=t.n(i),d=t(251),n=t.n(d),c=t(77),r=t.n(c),l=t(42),o=t.n(l),h=t(931),j=t.n(h),m=t(1),b=t(0),x=t(933),p=t(55),v=t(152);t(945),t(947);const{Search:O}=j.a;class u extends b.Component{constructor(e){super(e),this.init=async()=>{if(window.ethereum&&await p.b.eth.getAccounts((s,e)=>{this.setState({address:e[0]})}),"0x0000000000000000000000000000000000000000"!=await p.a.Family.methods.parentOf(this.state.address).call()){this.setState({isBind:!0});let s=await p.a.Family.methods.childrenOf(this.state.address).call(),e=[];if(s.length>0)for(let t=0;t<s.length;t++)e.unshift({address:s[t],energy:0,grade:""});this.setState({lists:e})}},this.bind=async e=>{if(""==this.state.inviteAddress)return Object(v.a)(s.t("tips.message17"),"error");let t=p.b.utils.isAddress(this.state.inviteAddress);if(console.log(t),!t)return Object(v.a)(s.t("tips.message17"),"error");let i=await p.a.Family.methods.parentOf(this.state.inviteAddress).call();console.log(i);let a=await p.a.Family.methods.rootAddress().call();if(this.state.inviteAddress!=a&&"0x0000000000000000000000000000000000000000"==i)return Object(v.a)(s.t("tips.message17"),"error");p.a.Family.methods.makeRelation(this.state.inviteAddress).send({from:this.state.address}).on("receipt",e=>{Object(v.a)(s.t("tips.message21"),"success"),this.init()}).on("error",e=>{Object(v.a)(s.t("CANCEL"),"error")})},this.phonebind=async e=>{if(""==this.state.inviteAddress)return document.getElementById("tips").innerHTML=s.t("tips.message17");let t=p.b.utils.isAddress(this.state.inviteAddress);if(console.log(t),!t)return document.getElementById("tips").innerHTML=s.t("tips.message17");let i=await p.a.Family.methods.parentOf(this.state.inviteAddress).call();console.log(i);let a=await p.a.Family.methods.rootAddress().call();if(this.state.inviteAddress!=a&&"0x0000000000000000000000000000000000000000"==i)return document.getElementById("tips").innerHTML=s.t("tips.message17");document.getElementById("tips").innerHTML="",p.a.Family.methods.makeRelation(this.state.inviteAddress).send({from:this.state.address}).on("receipt",e=>{Object(v.a)(s.t("tips.message21"),"success"),this.init()}).on("error",e=>{Object(v.a)(s.t("CANCEL"),"error")})},this.copy=()=>{o.a.destroy(),o.a.success({content:s.t("tips.copyS"),className:"custom-class",style:{marginTop:"20vh"}})},this.inputAddress=s=>{console.log(s.target.value),this.setState({inviteAddress:s.target.value})},this.state={address:"",loading:!1,isBind:!1,lists:[],linkmy:"",inviteAddress:""}}componentDidMount(){this.init()}render(){const e=this.state;return Object(m.jsxs)("div",{className:"my",children:[s.isPC?Object(m.jsx)("img",{src:t(944)}):"",e.isBind?Object(m.jsxs)("div",{className:"friendList",children:[Object(m.jsx)("div",{className:"title",children:s.t("my.title1")}),s.isPC?"":Object(m.jsx)("div",{className:"line"}),Object(m.jsxs)("div",{className:"bind",children:[Object(m.jsx)("div",{className:"title",children:s.t("my.title")}),Object(m.jsxs)(n.a,{children:[Object(m.jsx)(r.a,{className:"left",span:s.isPC?12:24,children:Object(m.jsxs)("div",{className:"box",children:[Object(m.jsxs)(n.a,{className:"top",children:[Object(m.jsx)(r.a,{span:8,children:Object(m.jsx)("div",{children:s.t("my.text2")})}),Object(m.jsx)(r.a,{span:8,children:Object(m.jsx)("div",{children:s.t("my.text6")})}),Object(m.jsx)(r.a,{span:8,children:Object(m.jsx)("div",{children:s.t("my.text10")})})]}),Object(m.jsx)("div",{className:"childrenList",children:Object(m.jsx)("div",{className:"lists",children:e.lists.map((e,t)=>{var i,a,d,c;return Object(m.jsxs)(n.a,{className:"item",children:[Object(m.jsx)(r.a,{span:8,children:s.isPC?(null===(i=e.address)||void 0===i?void 0:i.slice(0,5))+"..."+(null===(a=e.address)||void 0===a?void 0:a.slice(-4)):(null===(d=e.address)||void 0===d?void 0:d.slice(0,5))+"..."+(null===(c=e.address)||void 0===c?void 0:c.slice(-4))}),Object(m.jsx)(r.a,{span:8,children:e.energy}),Object(m.jsx)(r.a,{span:8,children:e.grade})]},t)})})})]})}),Object(m.jsxs)(r.a,{className:"right",span:s.isPC?12:24,children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"grade",children:Object(m.jsx)("img",{src:t(948)})}),Object(m.jsx)("div",{className:"title",children:s.t("my.text11")}),Object(m.jsx)("div",{className:"total",children:"0"}),Object(m.jsx)(a.a,{disabled:!0,children:s.t("my.text12")}),Object(m.jsx)("div",{className:"historys",children:s.t("my.text13")})]}),Object(m.jsxs)("div",{className:"bottom",children:[Object(m.jsx)("div",{className:"title",children:s.t("my.text8")}),(s.isPC,Object(m.jsxs)("div",{className:"invite-address",children:[e.address.slice(0,4),"...",e.address.slice(-5)]})),Object(m.jsx)(x.CopyToClipboard,{text:e.address,onCopy:this.copy,children:Object(m.jsx)("img",{src:t(946)})})]})]})]})]})]}):Object(m.jsxs)("div",{className:"nobind",children:[Object(m.jsx)("div",{className:"title",children:s.t("my.title1")}),s.isPC?"":Object(m.jsx)("div",{className:"line"}),s.isPC?Object(m.jsx)(O,{className:"input-address",placeholder:s.t("my.text4"),value:e.inviteAddress,allowClear:!0,onChange:this.inputAddress,enterButton:s.t("my.text5"),onSearch:this.bind}):Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{value:e.inviteAddress,placeholder:s.t("my.text4"),onChange:this.inputAddress}),Object(m.jsx)("div",{id:"tips"}),Object(m.jsx)(a.a,{onClick:this.phonebind,children:s.t("my.text5")})]})]})]})}}}.call(this,t(23))},944:function(s,e){s.exports="assets/images/d981b521dc22fbd0edb28928b0489374.png"},945:function(s,e,t){"use strict";t(189),t(55)},946:function(s,e){s.exports="assets/images/306d767c924056dbad83bd389bb2b3b1.png"},947:function(s,e,t){},948:function(s,e){s.exports="assets/images/3771f1fabc83e3760a2b13bed7f89ce1.png"}}]);