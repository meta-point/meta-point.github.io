(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{936:function(s,e,t){"use strict";t.r(e),function(s){t.d(e,"default",(function(){return N}));t(189),t(190);var i=t(61),n=t.n(i),a=t(42),d=t.n(a),c=t(1),r=t(0),l=t(943),o=t(942),h=(t(937),t(933)),b=t(55),j=t(152),m=(t(945),t(944)),p=t.n(m),f=(t(956),t(957)),u=t.n(f),x=t(958),g=t.n(x),O=t(946),y=t.n(O),v=t(959);t(961);class N extends r.Component{constructor(e){super(e),this.componentDidMount=async()=>{await this.init()},this.init=async()=>{window.ethereum&&await b.b.eth.getAccounts((s,e)=>{this.setState({address:e[0]})});let s=await b.a.MetaDeed.methods.balanceOf(this.state.address).call(),e=[];if(s>0)for(let t=0;t<s;t++){let s=await b.a.MetaDeed.methods.tokenOfOwnerByIndex(this.state.address,t).call();e.unshift({sign:"deed",id:s}),this.setState({lists:[...e]})}},this.exchange=e=>{Object(j.a)(s.t("tips.message22"),"warning")},this.approve=async e=>{let t=await b.a.MetaDeed.methods.isApprovedForAll(s.$address,b.a.MinistryLandResources._address).call();console.log(t),t?this.deedDelivery(e):b.a.MetaDeed.methods.setApprovalForAll(b.a.MinistryLandResources._address,!0).send({from:s.$address}).on("receipt",()=>{Object(j.a)(s.t("tips.message10"),"success"),this.deedDelivery(e)}).on("error",t=>{console.log(t),Object(j.a)(s.t("tips.message11"),"error"),this.setState(s=>{let{loadings:t}=s;const i=[...t];return i[e]=!1,{loadings:i}})})},this.deedDelivery=e=>{b.a.MinistryLandResources.methods.deedDelivery(e).send({from:s.$address}).on("receipt",()=>{Object(j.a)(s.t("buy.tips2"),"success"),this.init()}).on("error",t=>{console.log(t),Object(j.a)(s.t("CANCEL"),"error"),this.setState(s=>{let{loadings:t}=s;const i=[...t];return i[e]=!1,{loadings:i}})})},this.submit=s=>{this.transferModal.showModal(s)},this.copy=()=>{d.a.destroy(),d.a.success({content:s.t("tips.copyS"),className:"custom-class",style:{marginTop:"20vh"}})},this.state={address:null,lists:[],loadings:[]},e.onRef&&e.onRef(this)}render(){const e=this.state;return Object(c.jsxs)("div",{className:"myNft",children:[Object(c.jsx)(v.a,{onRef:s=>{this.transferModal=s},init:this.init}),s.isPC?Object(c.jsx)("img",{src:p.a}):"",Object(c.jsxs)("div",{className:"nfts",children:[Object(c.jsx)("div",{className:"title",children:s.t("myNft.title")}),Object(c.jsx)("div",{className:"line"}),Object(c.jsxs)("div",{className:"content",children:[s.t("myNft.text3"),":",e.lists.length]}),Object(c.jsx)("div",{className:"lists",children:Object(c.jsx)(l.a,{slidesPerView:s.isPC?3:1.1,spaceBetween:20,centeredSlides:1==e.lists.length,children:Object(c.jsx)("div",{className:"swiper-wrapper",children:e.lists.map((t,i)=>Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{className:"swiper-item",children:[Object(c.jsxs)("div",{className:"title",children:["deed"==t.sign?s.t("myNft.name"):s.t("myNft.name1"),Object(c.jsxs)("span",{children:["ID:",t.id]})]}),Object(c.jsx)("div",{className:"border",children:"deed"==t.sign?Object(c.jsx)("img",{src:u.a}):Object(c.jsx)("img",{src:g.a})}),"deed"==t.sign?Object(c.jsxs)("div",{className:"btns",children:[Object(c.jsx)(n.a,{loading:e.loadings[t.id],onClick:this.exchange.bind(this,t.id),children:s.t("myNft.text5")}),Object(c.jsx)(n.a,{onClick:this.submit.bind(this,t.id),children:s.t("myNft.text6")})]}):Object(c.jsxs)("div",{className:"des",children:[Object(c.jsxs)("div",{children:[s.t("myNft.text4"),":",t.landAddress.slice(0,4)+"..."+t.landAddress.slice(-5),Object(c.jsx)(h.CopyToClipboard,{text:t.landAddress,onCopy:this.copy,children:Object(c.jsx)("img",{className:"copy",src:y.a})})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[s.t("myNft.text1"),":"]}),t.capacity]})]})]})},i))})})})]})]})}}}.call(this,t(23))},944:function(s,e){s.exports="assets/images/d981b521dc22fbd0edb28928b0489374.png"},945:function(s,e,t){"use strict";t(189),t(55)},946:function(s,e){s.exports="assets/images/306d767c924056dbad83bd389bb2b3b1.png"},956:function(s,e){s.exports="assets/images/f85a8012b725025272675af085f6a962.png"},957:function(s,e){s.exports="assets/images/0e7edd3f577181f7b1e1687d25593f70.png"},958:function(s,e){s.exports="assets/images/f00fd44fad97023c83000f88b44af123.png"},959:function(s,e,t){"use strict";(function(s){t.d(e,"a",(function(){return j}));t(189);var i=t(932),n=t.n(i),a=t(61),d=t.n(a),c=t(931),r=t.n(c),l=t(1),o=t(0),h=t(55),b=t(152);t(960);class j extends o.Component{constructor(e){super(e),this.componentDidMount=async()=>{await this.init()},this.init=async()=>{},this.showModal=s=>{this.setState({visible:!0,tokenId:s})},this.submit=async()=>{if(""==this.state.toAddress)return Object(b.a)(s.t("tips.message17"),"error");let e=h.b.utils.isAddress(this.state.toAddress);if(console.log(e),!e)return Object(b.a)(s.t("tips.message17"),"error");this.setState({loading:!0}),h.a.MetaDeed.methods.transferFrom(s.$address,this.state.toAddress,this.state.tokenId).send({from:s.$address}).on("receipt",e=>{Object(b.a)(s.t("myNft.tips1"),"success"),this.cancel(),this.props.init()}).on("error",e=>{Object(b.a)(s.t("CANCEL"),"error"),this.setState({loading:!1})})},this.Inputs=s=>{this.setState({toAddress:s.target.value})},this.cancel=()=>{this.setState({loading:!1,visible:!1})},this.state={address:null,tokenId:"",toAddress:null,visible:!1,loading:!1},e.onRef&&e.onRef(this)}render(){const e=this.state;return Object(l.jsx)("div",{children:Object(l.jsxs)(n.a,{className:"pc_Bind-Modal",visible:e.visible,footer:null,closable:!0,onCancel:this.cancel,children:[Object(l.jsx)("div",{className:"pc_Bind-Modal-title",children:Object(l.jsx)("span",{children:s.t("myNft.text6")})}),Object(l.jsxs)("div",{className:"pc_Bind-Modal-content",children:[Object(l.jsx)("span",{className:"pc_content-titel",children:s.t("myNft.text7")}),Object(l.jsx)("div",{className:"border",children:Object(l.jsx)(r.a,{onInput:this.Inputs,value:e.toAddress,type:"text"})}),Object(l.jsx)("div",{className:"bind-btn",children:Object(l.jsx)(d.a,{loading:e.loading,type:"primary",onClick:this.submit,children:s.t("bind.text4")})})]})]})})}}}).call(this,t(23))},960:function(s,e,t){},961:function(s,e,t){}}]);